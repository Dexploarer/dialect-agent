<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend Debug Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            line-height: 1.6;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #007acc;
            background: #f0f8ff;
        }
        .success { border-left-color: #28a745; background: #f0fff0; }
        .error { border-left-color: #dc3545; background: #fff0f0; }
    </style>
</head>
<body>
    <h1>Frontend Debug Test</h1>
    <div id="results"></div>
    
    <script>
        async function runTests() {
            const results = document.getElementById('results');
            
            function addResult(title, success, message) {
                const div = document.createElement('div');
                div.className = `test-result ${success ? 'success' : 'error'}`;
                div.innerHTML = `<strong>${title}:</strong> ${message}`;
                results.appendChild(div);
            }
            
            // Test 1: Basic connectivity
            try {
                const response = await fetch('http://localhost:3001');
                const isOk = response.ok;
                addResult('Frontend Server', isOk, isOk ? 'Server is running' : `Error: ${response.status}`);
            } catch (error) {
                addResult('Frontend Server', false, `Connection failed: ${error.message}`);
            }
            
            // Test 2: Backend connectivity
            try {
                const response = await fetch('http://localhost:3000/health');
                const isOk = response.ok;
                const data = await response.json();
                addResult('Backend Server', isOk, isOk ? `Health check passed: ${JSON.stringify(data)}` : `Error: ${response.status}`);
            } catch (error) {
                addResult('Backend Server', false, `Connection failed: ${error.message}`);
            }
            
            // Test 3: API Proxy
            try {
                const response = await fetch('http://localhost:3001/api/stats');
                const isOk = response.ok;
                addResult('API Proxy', isOk, isOk ? 'Proxy is working' : `Proxy error: ${response.status}`);
            } catch (error) {
                addResult('API Proxy', false, `Proxy failed: ${error.message}`);
            }
            
            // Test 4: Check if main app loads
            try {
                const response = await fetch('http://localhost:3001');
                const html = await response.text();
                const hasReact = html.includes('root') && html.includes('main.tsx');
                addResult('React App Structure', hasReact, hasReact ? 'HTML structure looks good' : 'Missing React app elements');
            } catch (error) {
                addResult('React App Structure', false, `Failed to check: ${error.message}`);
            }
        }
        
        runTests();
    </script>
</body>
</html>